<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="The personal blog of Allan Ritchie">

  <title>Allan Ritchie - Shiny - Easy Mode Statics</title>

  <link rel="canonical" href="https://aritchie.github.io/posts/shiny-easymode">

      <link type="application/rss+xml" rel="alternate" title="Allan Ritchie&#x27;s Blog" href="/Xamarin.rss" />
      <link type="application/rss+xml" rel="alternate" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" href="/feed.atom" />
  
  <meta name="application-name" content="Allan Ritchie" />
  <meta name="msapplication-tooltip" content="Allan Ritchie" />
  <meta name="msapplication-starturl" content="/" />

  <meta property="og:title" content="Allan Ritchie - Shiny - Easy Mode Statics" />
    <meta property="og:image" content="/images/toronto_pan.jpg" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://aritchie.github.io/posts/shiny-easymode" />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <!-- Bootstrap core CSS -->
  <link href="/vendor/bootstrap/scss/bootstrap.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="/vendor/fontawesome-free/css/brands.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css' data-no-mirror>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css' data-no-mirror>
  
  <!-- Custom styles for this template -->
  <link href="/scss/clean-blog.css" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.0.0/dist/quicklink.umd.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/themes/prism.css">
  
  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Allan Ritchie</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="/posts">Posts</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/tags">Tags</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/about">About</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/livestream">Live Streams</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/projects">Projects</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/speaking">Speaking</a>
            </li>
</ul>
    </div>
  </div>
</nav>

  <!-- Page Header -->
  <header class="masthead" style="background-image: url(&quot;/images/toronto_pan.jpg&quot;)">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="post-heading">
          <h1>
            Shiny - Easy Mode Statics
          </h1>
              <div class="meta">Published on Tuesday, January 28, 2020</div>
                <div class="mt-3">
                      <a href="/tags/xamarin" class="badge badge-light"> Xamarin</a>
                      <a href="/tags/oss" class="badge badge-light"> OSS</a>
                      <a href="/tags/shiny" class="badge badge-light"> Shiny</a>
                </div>
        </div>
      </div>
    </div>
  </div>
</header>

  <!-- Main Content -->
  <div class="container"> 
    <div class="row">
      <div id="content" class="col-md-12">  
        <h2 id="easy-mode">Easy Mode</h2>
<p>While I was working on Shiny, a LOT of people emailed me telling me &quot;Component.This&quot; doesn't exist (they could have read the samples, but whatevs).  They wanted a Xamarin Essentials approach.  I disagree with this approach to a degree since it doesn't provide some enterprise practices that I require in my day-to-day, but I'm not everyone and people have different requirements.  Thus I decide to bring the static &quot;shims&quot; into Shiny as well as bring a registration model similar to Xamarin Forms.  You still need some of the Shiny startup boilerplate, but there are now ways to cut that down a great deal as well.</p>
<h2 id="static-access">Static Access</h2>
<p>Let's start with the static accessors.  Essentially, if we have a service called Shiny.Jobs.IJobManager, we now have an equivalent ShinyJobManager with all of the functions of the interface.  No more DI necessary.</p>
<pre><code class="language-csharp">// examples
await ShinyJobManager.Schedule(new JobInfo(...));
ShinySettings.Set(&quot;1&quot;);
ShinyEnvironment.AppVersion

ShinyGeofences.StartMonitoring(...)
ShinyGps.StartListener(...)
ShinyMotionActivity.Query(...)
</code></pre>
<p>Don't like the boilerplate?  I can only get rid of so much, but I've made service registration match the Xamarin Forms assembly attribute.</p>
<h2 id="registering-with-assemblies">Registering with Assemblies</h2>
<p>I wanted a fast way to skip the startup file and give a familiar style, so I borrowed a page from Xamarin Forms.  You can register you services very similar to how XF does it, so that you can use your services inside of Shiny delegates and jobs</p>
<p>In the usual &quot;init&quot; places, simply do the following</p>
<pre><code class="language-csharp">iOSShinyHost.Init(ShinyStartup.FromAssemblyRegistration(typeof(App).Assembly));
</code></pre>
<p>Now, somewhere in your shared project - add attributes similar to the following to wire up some of your stuff</p>
<pre><code class="language-csharp">[assembly: ShinySqliteIntegration(true, true, true, true, true)]
[assembly: ShinyJob(typeof(SampleJob), &quot;MyIdentifier&quot;, BatteryNotLow = true, DeviceCharging = false, RequiredInternetAccess = Shiny.Jobs.InternetAccess.Any)]
[assembly: ShinyAppCenterIntegration(Constants.AppCenterTokens, true, true)]
[assembly: ShinyService(typeof(YourOwnService))]
[assembly: ShinyService(typeof(IYourOwnService, typeof(YourOwnService))]
</code></pre>
<h2 id="auto-registering-everything">Auto-Registering Everything!</h2>
<p>For any and all Shiny libraries, we automatically setup the services for you.  You don't even need a startup file (similar to registering with assembly attributes).  Note that if you do you use DI in your delegates, you will need to use assembly attribute registrations if you want to take a &quot;bite of both pies&quot;.  With auto assemblies, we also go out and detect the appropriate delegates for each service type.  If one isn't found and it is required, we throw an exception during Init.</p>
<p>Auto-registration is by far the easiest way to get up and running, but it comes at the cost of startup performance.  On Android, you may notice it during startup.  You also may run into linker specific issues - my suggestion is to disable linking on Shiny libraries.</p>
<pre><code class="language-csharp">// iOS - Normal AppDelegate addition
iOSShinyHost.Init(ShinyStartup.AutoRegister());

// Android - YourAndroidApplication.OnCreate
AndroidShinyHost.Init(ShinyStartup.AutoRegister());
</code></pre>
<p>We don't do this for jobs though.  You need to schedule those yourself just like before.</p>
<h2 id="closing-thoughts">Closing Thoughts</h2>
<p>If speed and testability are things that are important to you, I don't recommend this approach for everyone.  Use the traditional mechanisms with DI.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="introducingshiny">Initial Shiny Setup</a></li>
<li><a href="https://github.com/shinyorg/shinysamples/tree/master/Samples">Samples</a></li>
<li><a href="https://shinylib.net">Documentation</a></li>
<li>Shiny.Core - <a href="https://www.nuget.org/packages/Shiny.Core/"><img src="https://img.shields.io/nuget/v/Shiny.Core.svg?maxAge=2592000" alt="NuGet" /></a></li>
</ul>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    <!-- allan-ritchies-blog.disqus.com -->
    var disqus_shortname = 'allan-ritchies-blog'; // required: replace example with your forum shortname
    var disqus_identifier = 'shiny-easymode';
    var disqus_title = 'Shiny - Easy Mode Statics';
    var disqus_url = 'https://aritchie.github.io/posts/shiny-easymode';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->  
  <div id="footer" class="p-3 text-white" style="background: black">
    <div class="container-xl">
        <div class="row">
            <div class="offset-lg-2 col-12 col-lg-8">
                <div class="text-light text-center font-size-sm">
                    <a target="_NEWWINDOW" href="https://github.com/aritchie" class="text-light pr-2 mr-1"><i class="fab fa-github"></i> GitHub</a>
                    <a target="_NEWWINDOW" href="https://twitter.com/allanritchie911" class="text-light pr-2 mr-1"><i class="fab fa-twitter"></i> Twitter</a>
                    <a target="_NEWWINDOW" href="https://twitch.tv/allancritchie" class="text-light pr-2 mr-1"><i class="fab fa-twitch"></i> Twitch</a>
                    <a target="_NEWWINDOW" class="text-light font-weight-bold" href="https://github.com/sponsors/aritchie"><i class="fa fa-heart"></i> Support</a>
                </div>
                <div class="pt-2 font-size-sm text-muted text-center">
                    © 2020 Allan Ritchie
                </div>
            </div>
        </div>
    </div>
</div>



  <!-- Bootstrap core JavaScript -->
  <script src="/vendor/jquery/jquery.min.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134251257-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-134251257-1');
</script>


  

  <!-- Custom scripts for this template -->
  <script src="/js/clean-blog.js"></script>

</body>

</html>
